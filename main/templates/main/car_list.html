<!-- main/templates/client_home.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê—Ä–µ–Ω–¥–∞ –∞–≤—Ç–æ | –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-100 text-gray-900">

    <!-- –•–µ–¥–µ—Ä -->
    <header class="bg-white shadow-md p-4 flex justify-between items-center">
        <h1 class="text-2xl font-bold">üöó RentAuto</h1>
        <div>
            <a href="/logout/" class="text-blue-500 hover:underline">–í—ã–π—Ç–∏</a>
        </div>
    </header>

    <!-- –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞ -->
<section class="p-6 bg-white shadow mt-4 max-w-4xl mx-auto rounded-xl">
    <form method="GET" class="flex flex-wrap gap-4 items-end">
        <div>
            <label class="block font-semibold">–ö–ª–∞—Å—Å –∞–≤—Ç–æ</label>
            <select name="category" class="border rounded p-2">
                <option value="">–í—Å–µ</option>
                <option value="standard" {% if category == 'standard' %}selected{% endif %}>–°—Ç–∞–Ω–¥–∞—Ä—Ç</option>
                <option value="luxury" {% if category == 'luxury' %}selected{% endif %}>–õ—é–∫—Å</option>
                <option value="electric" {% if category == 'electric' %}selected{% endif %}>–≠–ª–µ–∫—Ç—Ä–æ</option>
            </select>
        </div>

        <div>
            <label class="block font-semibold">–î–∞—Ç–∞ –æ—Ç</label>
            <input type="date" name="start_date" value="{{ start_date }}" class="border rounded p-2">
        </div>

        <div>
            <label class="block font-semibold">–î–∞—Ç–∞ –¥–æ</label>
            <input type="date" name="end_date" value="{{ end_date }}" class="border rounded p-2">
        </div>

        <div>
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">üîç –ù–∞–π—Ç–∏</button>
        </div>
    </form>
</section>


    <!-- –°–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω -->
    <section class="max-w-4xl mx-auto mt-6">
        {% if cars %}
            <div class="grid md:grid-cols-2 gap-6">
                {% for car in cars %}
                    <div class="bg-white shadow p-4 rounded-xl">
                        <h2 class="text-xl font-bold mb-2">{{ car.brand }} {{ car.model }}</h2>
                        {% if car.image %}
                            <img src="{{ car.image.url }}" alt="{{ car.brand }}" class="w-full h-48 object-cover rounded">
                        {% endif %}
                        <p class="mt-2">üí∞ <strong>{{ car.price_per_day }} ‚Ç∏</strong> –≤ –¥–µ–Ω—å</p>
                        <p>üöò –ö–ª–∞—Å—Å: {{ car.get_category_display }}</p>
                        <p>
                            {% if car.is_available %}
                                ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞
                            {% else %}
                                ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞
                            {% endif %}
                        </p>
                         <!-- ‚≠ê –†–µ–π—Ç–∏–Ω–≥ -->
                        <p>‚≠ê –†–µ–π—Ç–∏–Ω–≥: {{ car.reviews_avg|floatformat:1 }}/5 ({{ car.reviews_count }} –æ—Ç–∑—ã–≤–æ–≤)</p>
        <!-- –§–æ—Ä–º–∞ –æ—Ç–∑—ã–≤–∞ -->
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" name="car_id" value="{{ car.id }}">

            <div class="mt-4">
                <label for="rating" class="block">–û—Ü–µ–Ω–∫–∞ (–æ—Ç 1 –¥–æ 5)</label>
                <select name="rating" id="rating" class="border rounded p-2">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="mt-4">
                <label for="text" class="block">–û—Ç–∑—ã–≤</label>
                <textarea name="text" id="text" rows="4" class="border rounded p-2 w-full" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–∑—ã–≤..."></textarea>
            </div>

            <button type="submit" class="bg-blue-600 text-white px-4 py-2 mt-4 rounded">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
        </form>
                        <a href="{% url 'book_car' car.id %}" class="inline-block mt-3 bg-green-600 text-white px-4 py-2 rounded">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-center text-gray-500 mt-6">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—à–∏–Ω –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º</p>
        {% endif %}
    </section>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer class="text-center text-sm text-gray-500 mt-10 p-4">
        &copy; {{ year }} RentAuto. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </footer>

</body>
</html>
